(this["webpackJsonpgoit-react-hw-04-SE"]=this["webpackJsonpgoit-react-hw-04-SE"]||[]).push([[0],{18:function(e,t,r){e.exports={SearchForm:"Searchbar_SearchForm__3bCm9",SearchFormButton:"Searchbar_SearchFormButton__Cy5Un",SearchFormInput:"Searchbar_SearchFormInput__2vu-K"}},21:function(e,t,r){e.exports={Overlay:"Modal_Overlay__1F42f",Modal:"Modal_Modal__157gd"}},30:function(e,t,r){e.exports={topBar:"TopBar_topBar__2iXTN"}},32:function(e,t,r){e.exports={loaderBox:"Spiner_loaderBox__33xoH"}},33:function(e,t,r){e.exports={ImageGallery:"ImageGallery_ImageGallery__2hNPW"}},37:function(e,t,r){e.exports={loadMoreButton:"ButtonMore_loadMoreButton__2j4Yf"}},39:function(e,t,r){e.exports={btnToTop:"BtnToTop_btnToTop__2x6OO","hide-el":"BtnToTop_hide-el__2kg3F"}},44:function(e,t,r){},47:function(e,t,r){},7:function(e,t,r){e.exports={scrollToggle:"ScrollToggle_scrollToggle__3ZuVT",buttonFrame:"ScrollToggle_buttonFrame__1X0Kd",scrollButton:"ScrollToggle_scrollButton__wKYsS",itemText:"ScrollToggle_itemText__u2c8H",scrollName:"ScrollToggle_scrollName__2vjaa"}},88:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(8),o=r.n(c),l=(r(44),r(45),r(6)),s=r.n(l),i=r(19),u=r(11),j=r(4),m=(r(47),r(17)),h=(r(48),r(30)),d=r.n(h),b=r(2),g=function(e){var t=e.children;return Object(b.jsx)("div",{className:d.a.topBar,children:t})},f=r(15),O=r(18),p=r.n(O),x=function(e){var t=e.searchQueryToUp,r=Object(a.useState)("hdr"),n=Object(j.a)(r,2),c=n[0],o=n[1],l=Object(a.useRef)();Object(a.useEffect)((function(){""!==c.trim()&&(t(c),l.current.placeholder=c,o(""))}),[]);return Object(b.jsxs)("form",{className:p.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),l.current.placeholder=c,o("")):m.b.warn("\u0412\u0432\u0435\u0434\u0438 \u0447\u0442\u043e-\u0442\u043e!",{autoClose:2e3,theme:"colored",icon:!1})},children:[Object(b.jsx)("button",{type:"submit",className:p.a.SearchFormButton,children:Object(b.jsx)(f.b,{})}),Object(b.jsx)("label",{children:Object(b.jsx)("input",{className:p.a.SearchFormInput,type:"text",name:"searchInput",ref:l,placeholder:"search",value:c,onChange:function(e){return o(e.currentTarget.value)},pattern:"^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u041f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435, \u0446\u0438\u0444\u0440 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432."})})]})},v=r(31),_=r.n(v),I=r(32),y=r.n(I),T=function(){return Object(b.jsx)("div",{className:y.a.loaderBox,children:Object(b.jsx)(_.a,{type:"Circles",color:"#617a53",height:160,width:160,timeout:5e3})})},S=r(33),N=r.n(S),w=function(e){var t=e.children;return Object(b.jsx)("ul",{id:"gallery",className:N.a.ImageGallery,children:t})},k=r(9),B=r.n(k),E=function(e){var t=e.contactObj,r=e.imgIdToUp,a=t.webformatURL,n=t.tags,c=t.largeImageURL,o=t.id,l=t.pageURL;return Object(b.jsxs)("li",{className:B.a.ImageGalleryItem,children:[Object(b.jsx)("a",{href:c,id:o,className:B.a.ImageGalleryItemLink,onClick:function(e){return e.preventDefault(),r(e.currentTarget.id)},children:Object(b.jsx)("img",{src:a,alt:n,className:B.a.ImageGalleryItemImage})}),Object(b.jsx)("a",{href:l,className:B.a.homePageUrl,target:"_blank",rel:"noreferrer",children:Object(b.jsx)(f.a,{className:B.a.homeIcon})})]})},U=r(34),F=r(35),L=r(36),C=r.n(L),G=function(){function e(){Object(U.a)(this,e),this.searchQuery="",this.KEY="22984321-98218ca8e9b1f3be57a008ac4&q",this.BASE_URL="https://pixabay.com/api/",this.page=1,this.orientation="all",this.imgType="all"}return Object(F.a)(e,[{key:"fetchImages",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchQuery=t,this.page=r,a="".concat(this.BASE_URL,"?image_type=").concat(this.imgType,"&orientation=").concat(this.orientation,"&page=").concat(this.page,"&per_page=12&key=").concat(this.KEY,"&q=").concat(this.searchQuery),e.next=5,C.a.get(a);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),M=new G,R=r(37),q=r.n(R),Y=function(e){var t=e.clickOn;return Object(b.jsx)("button",{type:"button",className:q.a.loadMoreButton,onClick:function(){return t(!0)},children:"Load more"})},A=r(21),H=r.n(A),K=document.querySelector("#modal-root"),P=function(e){var t=e.closeModalClick,r=(e.changeImg,e.closeModalEsc),n=(e.modalOn,e.changeImgKey,e.children);Object(a.useEffect)((function(){window.addEventListener("keydown",(function(e){return o(e)}))}));var o=function(e){"Escape"===e.code&&r()};return Object(c.createPortal)(Object(b.jsx)("div",{className:H.a.Overlay,onClick:function(e){e.target===e.currentTarget&&t(!0)},children:Object(b.jsx)("div",{className:H.a.Modal,children:n})}),K)},Q=r(38),Z=r(16),z=r(39),D=r.n(z),W=function(){var e=Object(a.useState)("hide"),t=Object(j.a)(e,2),r=t[0],n=t[1];Object(a.useEffect)((function(){window.addEventListener("scroll",Object(Q.a)(500,(function(e){return c()})))}));var c=function(){var e=window.scrollY;n(e>140?"visible":"hide")};return Object(b.jsxs)(b.Fragment,{children:["visible"===r&&Object(b.jsx)("button",{type:"button",className:D.a.btnToTop,onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:Object(b.jsx)(Z.a,{})}),Object(b.jsx)(b.Fragment,{})]})},X=r(7),J=r.n(X),V=function(e){var t=e.toggleScroll,r=e.position;return Object(b.jsxs)("div",{className:J.a.scrollToggle,children:[Object(b.jsx)("span",{className:J.a.scrollName,children:"ENDLESS SCROLL"}),Object(b.jsxs)("div",{className:J.a.buttonFrame,children:[Object(b.jsx)("span",{className:J.a.itemText,children:"ON"}),Object(b.jsx)("span",{className:J.a.itemText,children:"OFF"}),Object(b.jsx)("button",{type:"button",className:J.a.scrollButton,style:r?{right:"2px"}:{left:"2px"},onClick:function(){return t(!r)},children:Object(b.jsx)(Z.b,{})})]})]})};var $=function(){var e=Object(a.useState)("hdr"),t=Object(j.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)("pending"),o=Object(j.a)(c,2),l=o[0],h=o[1],d=Object(a.useState)(0),f=Object(j.a)(d,2),O=f[0],p=f[1],v=Object(a.useState)(1),_=Object(j.a)(v,2),I=_[0],y=_[1],S=Object(a.useState)([]),N=Object(j.a)(S,2),k=N[0],B=N[1],U=Object(a.useState)(!1),F=Object(j.a)(U,2),L=F[0],C=F[1],G=Object(a.useState)(""),R=Object(j.a)(G,2),q=R[0],A=R[1],H=Object(a.useState)(""),K=Object(j.a)(H,2),Q=K[0],Z=K[1],z=Object(a.useState)(0),D=Object(j.a)(z,2),X=D[0],J=D[1],$=Object(a.useState)(0),ee=Object(j.a)($,2),te=ee[0],re=ee[1],ae=Object(a.useState)(!1),ne=Object(j.a)(ae,2),ce=ne[0],oe=ne[1];Object(a.useEffect)((function(){le(r,I)}),[r,I]),Object(a.useEffect)((function(){setTimeout((function(){if(1!==I&&!ce){var e=te+60;window.scrollTo({top:e,behavior:"smooth"})}}),1e3)}),[te,I,ce]),Object(a.useEffect)((function(){if(0!==k.length&&ce){var e=k[k.length-1].id;setTimeout((function(){var t=document.getElementById(e);new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(re(0!==k.length&&document.querySelector('[id="gallery"]').offsetHeight),y((function(e){return e+1})),t.unobserve(e.target))}))}),{threshold:.2}).observe(t)}),600)}}),[k,ce]);var le=function(){var e=Object(u.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",h("idle"));case 2:return 1===r&&h("pending"),e.prev=4,e.next=7,M.fetchImages(t,r);case 7:if(0!==(a=e.sent).data.hits.length){e.next=10;break}return e.abrupt("return");case 10:1===r&&B(Object(i.a)(a.data.hits)),1!==r&&B((function(e){return[].concat(Object(i.a)(e),Object(i.a)(a.data.hits))})),p(a.data.totalHits),h((function(){return 0===a.data.totalHits?"rejected":"resolved"})),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(4),console.log("Error: request failed"),e.abrupt("return",h("failed"));case 20:case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t,r){return e.apply(this,arguments)}}(),se=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(0!==k.length&&document.querySelector('[id="gallery"]').offsetHeight),y((function(e){return e+1}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){return C(!L)},ue=function(e){var t=function(e,t){var r=t.findIndex((function(t){return t.id===Number.parseInt(e)}));return{lrgImgURL:t[r].largeImageURL,imgTags:t[r].tags,imgNo:t[r].id}}(e,k),r=t.lrgImgURL,a=t.imgTags,n=t.imgNo;C(!L),J(n),A(r),Z(a)},je=function(e){var t=function(e,t,r){var a="";return e>=window.innerWidth/2&&(a="right"),e<window.innerWidth/2&&(a="left"),function(e,t,r){var a=r.findIndex((function(e){return e.id===t})),n=0;return{lrgImgURL:r[n="right"===e?a===r.length-1?0:a+1:0===a?r.length-1:a-1].largeImageURL,imgTags:r[n].tags,imgNo:r[n].id}}(a,t,r)}(e,X,k),r=t.lrgImgURL,a=t.imgTags,n=t.imgNo;J(n),A(r),Z(a)};return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)(g,{children:[Object(b.jsx)("h1",{className:"serviceTitle",children:"search images"}),Object(b.jsx)(x,{searchQueryToUp:function(e){n(e),y(1)}}),Object(b.jsx)(V,{toggleScroll:function(e){return oe(e)},position:ce})]}),"idle"===l&&Object(b.jsx)("h2",{className:"galleryTitle",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441"}),"pending"===l&&Object(b.jsx)(T,{}),"rejected"===l&&Object(b.jsxs)("h2",{className:"galleryTitle",children:['\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "',r.toUpperCase(),'" \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e']}),"failed"===l&&Object(b.jsx)("h2",{className:"galleryTitle",children:"Error: request failed. \u041d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c"}),"resolved"===l&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h2",{className:"galleryTitle",children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",O,' \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "',r.toUpperCase(),'":']}),Object(b.jsx)(w,{children:k.map((function(e){var t=e.id;return Object(b.jsx)(E,{contactObj:e,imgIdToUp:ue},t)}))})]}),"resolved"===l&&12*I<O&&!ce&&Object(b.jsx)(Y,{clickOn:se}),12*I>=O&&"resolved"===l&&Object(b.jsxs)("h2",{className:"galleryTitle",children:['\u0417\u0430\u043f\u0440\u043e\u0441 "',r.toUpperCase(),'" \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d']}),Object(b.jsx)(m.a,{}),Object(b.jsx)(W,{}),L&&Object(b.jsx)(P,{closeModalClick:function(e){e&&ie()},closeModalEsc:ie,changeImg:je,modalOn:L,children:Object(b.jsx)("img",{src:q,alt:Q,className:"modalImg",onClick:function(e){return je(e.clientX)}})})]})};o.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)($,{})}),document.getElementById("root")),console.log("\u041f\u0440\u0438\u0432\u0456\u0442, \u0441\u0432\u0456\u0442! \u0416\u0438\u0442\u0442\u044f \u0445\u0438\u043c\u0435\u0440\u043d\u0435!")},9:function(e,t,r){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3LYS2",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3olG-",homePageUrl:"ImageGalleryItem_homePageUrl__1BoYu",homeIcon:"ImageGalleryItem_homeIcon__3Gfhq"}}},[[88,1,2]]]);
//# sourceMappingURL=main.a00c16d8.chunk.js.map